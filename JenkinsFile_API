pipeline {
    agent any

    environment {
        PYTHON_HOME = "%USERPROFILE%\AppData\Local\Microsoft\WindowsApps" //python path
    }

    stages {
        stage('Set up Python environment') {
            steps {
                bat "${PYTHON_HOME}\\python.exe --version" // Print Python version for debugging purposes
                bat "${PYTHON_HOME}\\pip.exe install -r requirements.txt" // Install Python dependencies if needed
                
            }
        }
    }

    stages {
        stage('Run API TESTS') {
            steps {
                // Execute Python script
                bat "python API_Test_runner.py"
            }
        }
    }
    
    post {
        always {
            cleanWs()
        }
    }
}
